<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Family Tasks</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      padding: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
    }
    th, td {
      border: 1px solid #bbb;
      padding: 12px;
      text-align: center;
      font-size: 1.05em;
      vertical-align: top;
    }
    th {
      background-color: #e0e0e0;
      font-weight: bold;
      font-size: 1.2em;
      text-transform: uppercase;
    }
    input[type="checkbox"] {
      transform: scale(1.3);
      cursor: pointer;
      margin-right: 6px;
    }
    label {
      display: block;
      padding: 4px 0;
      font-weight: 500;
    }
    .task {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .task span {
      margin-left: 10px;
      font-style: italic;
      color: #666;
    }
    .approved {
      color: green !important;
      font-weight: bold;
    }
    h1 {
      font-size: 2em;
      margin-bottom: 20px;
      text-align: center;
      color: #333;
      text-shadow: 1px 1px 0 #ccc;
    }
    .footer-note {
      margin-top: 30px;
      text-align: center;
      font-size: 1.1em;
      color: #444;
      font-style: italic;
      background-color: #eaf6ea;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 0 6px rgba(0,0,0,0.1);
    }
  </style>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const isParent = new URLSearchParams(window.location.search).get('user') === 'parent';

      window.toggleTask = function(checkbox, id) {
        const approveBtn = document.getElementById(id + '-approve');
        const statusSpan = document.getElementById(id + '-status');
        if (checkbox.checked) {
          statusSpan.textContent = 'Pending approval';
          if (isParent && approveBtn) approveBtn.style.display = 'inline-block';
        } else {
          statusSpan.textContent = '';
          if (approveBtn) approveBtn.style.display = 'none';
        }
      }

      window.approveTask = function(id) {
        const checkbox = document.getElementById(id + '-checkbox');
        const statusSpan = document.getElementById(id + '-status');
        const approveBtn = document.getElementById(id + '-approve');

        if (!isParent) {
          alert('Only parents can approve tasks. Add ?user=parent to the URL.');
          return;
        }

        if (checkbox && checkbox.checked) {
          statusSpan.textContent = '✅ Approved';
          statusSpan.classList.add('approved');
          checkbox.disabled = true;
          if (approveBtn) approveBtn.style.display = 'none';
        }
      }

      const chores = {
        Monday: {
          Jacob: ["Vacuum common areas", "Scoop/clean cat litter"],
          Jalyna: ["Wash dishes"],
          Josh: ["Take out trash"],
          Jeremy: ["Clean bedroom"]
        },
        Tuesday: {
          Jacob: ["Scoop/clean cat litter"],
          Jalyna: ["Wash dishes"],
          Josh: ["Wash dishes", "Take recycling to front curb"],
          Jeremy: ["Clean bedroom"]
        },
        Wednesday: {
          Jacob: ["Wash dishes", "Take trash to front curb"],
          Jalyna: ["Wipe down surfaces", "Scoop/clean cat litter"],
          Josh: ["Clean windows"],
          Jeremy: ["Clean bedroom"]
        },
        Thursday: {
          Jacob: ["Vacuum basement steps"],
          Jalyna: ["Wash dishes"],
          Josh: ["Wipe down appliances", "Scoop/clean cat litter"],
          Jeremy: ["Clean bedroom"]
        },
        Friday: {
          Jacob: ["Dust and sweep first floor"],
          Jalyna: ["Clean bathroom", "Scoop/clean cat litter"],
          Josh: ["Wash dishes"],
          Jeremy: ["Clean bedroom"]
        },
        Saturday: {
          Jacob: ["Wash dishes", "Scoop/clean cat litter"],
          Jalyna: ["Organize shared space"],
          Josh: ["Organize basement"],
          Jeremy: ["Clean bedroom"]
        },
        Sunday: {
          Jacob: [],
          Jalyna: [],
          Josh: [],
          Jeremy: []
        }
      };

      const names = ["Jacob", "Jalyna", "Josh", "Jeremy"];
      let rowHtml = "";

      Object.keys(chores).forEach((day) => {
        rowHtml += `<tr><td>${day}</td>`;
        names.forEach(name => {
          rowHtml += "<td>";
          chores[day][name].forEach((task, taskIndex) => {
            const id = `${name.toLowerCase()}-${day.toLowerCase()}-${taskIndex}`;
            rowHtml += `<div class='task'><label><input type='checkbox' id='${id}-checkbox' onchange='toggleTask(this, \"${id}\")'> ${task}</label><span id='${id}-status'></span><button id='${id}-approve' onclick='approveTask(\"${id}\")' style='display:none;'>Approve</button></div>`;
          });
          if (chores[day][name].length === 0) {
            rowHtml += `<em>Free</em>`;
          }
          rowHtml += "</td>";
        });
        rowHtml += "</tr>";
      });

      document.getElementById('chore-body').innerHTML = rowHtml;
    });
  </script>
</head>
<body>
  <h1>Family Tasks</h1>
  <table>
    <thead>
      <tr>
        <th>Day</th>
        <th>Jacob</th>
        <th>Jalyna</th>
        <th>Josh</th>
        <th>Jeremy</th>
      </tr>
    </thead>
    <tbody id="chore-body"></tbody>
  </table>
  <div class="footer-note">
    ✅ Once your chores are complete and approved, Wi-Fi access will be restored. Thanks for helping out — teamwork makes the dream work!
  </div>
</body>
</html>
